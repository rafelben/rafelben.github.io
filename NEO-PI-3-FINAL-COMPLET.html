<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEO-PI-3 - Test Complet de Personnalit√©</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; }
        .header p { font-size: 1.1em; opacity: 0.9; }
        .progress-section {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 1px solid #e9ecef;
        }
        .progress-bar {
            background: #e9ecef;
            height: 8px;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        .progress-fill {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            height: 100%;
            transition: width 0.3s ease;
        }
        .progress-text { text-align: center; color: #495057; font-weight: 500; }
        .content {
            padding: 40px 30px;
            max-height: 65vh;
            overflow-y: auto;
        }
        .question-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
        }
        .question-number { color: #667eea; font-weight: bold; font-size: 0.9em; margin-bottom: 10px; }
        .question-text { font-size: 1.05em; margin-bottom: 20px; color: #212529; font-weight: 500; line-height: 1.5; }
        .response-options {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }
        .response-btn {
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-align: center;
            font-size: 0.85em;
        }
        .response-btn:hover { border-color: #667eea; transform: translateY(-2px); }
        .response-btn.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white !important;
            border-color: transparent;
        }
        .response-btn.fd { color: #dc3545; }
        .response-btn.d { color: #fd7e14; }
        .response-btn.n { color: #ffc107; }
        .response-btn.a { color: #28a745; }
        .response-btn.fa { color: #667eea; }
        .controls {
            display: flex;
            gap: 15px;
            justify-content: center;
            padding: 30px;
            background: #f8f9fa;
            border-top: 1px solid #e9ecef;
            flex-wrap: wrap;
        }
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1em;
            transition: all 0.3s ease;
        }
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4); }
        .btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }
        .btn-secondary { background: #6c757d; color: white; }
        .btn-secondary:hover { background: #5a6268; transform: translateY(-2px); }
        .btn-secondary:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-success { background: #28a745; color: white; }
        .btn-success:hover { background: #218838; transform: translateY(-2px); }
        .home-screen {
            text-align: center;
            padding: 60px 20px;
        }
        .home-screen h2 { font-size: 2em; margin-bottom: 20px; color: #212529; }
        .home-screen p {
            font-size: 1.05em;
            color: #495057;
            margin-bottom: 30px;
            line-height: 1.6;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        .info-card {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
        }
        .info-icon { font-size: 2.5em; margin-bottom: 15px; }
        .info-title { font-weight: 600; font-size: 1.1em; margin-bottom: 10px; color: #212529; }
        .info-text { color: #6c757d; font-size: 0.95em; }
        .btn-start { padding: 15px 50px; font-size: 1.1em; margin-top: 20px; }
        .results-container { padding: 40px; max-height: 85vh; overflow-y: auto; }
        .results-title { font-size: 2em; font-weight: bold; text-align: center; margin-bottom: 30px; color: #212529; }
        .results-section { margin-bottom: 50px; }
        .dimension-header {
            font-size: 1.8em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
        }
        .facette-row {
            display: grid;
            grid-template-columns: 150px 100px 200px 1fr 120px;
            gap: 20px;
            align-items: center;
            padding: 18px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 12px;
            border: 1px solid #e9ecef;
        }
        .facette-name { font-weight: 600; color: #212529; font-size: 0.95em; }
        .score-brut { font-weight: bold; color: #667eea; text-align: center; font-size: 1.1em; }
        .percentile-badge {
            font-weight: 600;
            padding: 10px 15px;
            border-radius: 6px;
            text-align: center;
            color: white;
            font-size: 0.9em;
        }
        .percentile-20-34 { background: #721c24; }
        .percentile-35-44 { background: #d97706; }
        .percentile-45-55 { background: #6b7280; }
        .percentile-56-65 { background: #059669; }
        .percentile-66-80 { background: #0369a1; }
        .percentile-bar {
            background: #e9ecef;
            height: 24px;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }
        .percentile-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.85em;
            font-weight: bold;
        }
        .dimension-row {
            display: grid;
            grid-template-columns: 150px 100px 200px 1fr 120px;
            gap: 20px;
            align-items: center;
            padding: 22px;
            background: white;
            border-radius: 10px;
            margin-bottom: 25px;
            border: 2px solid #667eea;
        }
        .dimension-name { font-weight: bold; font-size: 1.2em; color: #667eea; }
        .export-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .export-modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }
        .export-modal-title { font-size: 1.5em; font-weight: bold; margin-bottom: 20px; color: #212529; }
        .export-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }
        .export-option {
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 600;
            color: #667eea;
        }
        .export-option:hover { border-color: #667eea; background: #f8f9fa; }
        .print-hidden { display: block; }
        @media print {
            body { background: white; }
            .print-hidden { display: none; }
            .controls { display: none; }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const WEBHOOK_URL = 'https://webhook.site/cfd7bb7d-d587-49c3-b5c7-68048b819d42';

        const QUESTIONS = [
            "Je ne suis pas du genre √† me faire du souci.",
            "J'aime vraiment bien la plupart des gens que je rencontre.",
            "J'ai une imagination tr√®s active.",
            "J'ai tendance √† √™tre cynique et sceptique en ce qui concerne les intentions des autres.",
            "Je suis r√©put√©(e) pour ma prudence et mon bon sens.",
            "Je me mets souvent en col√®re √† cause de la mani√®re dont les gens me traitent.",
            "J'essaye d'√©viter les foules.",
            "Les pr√©occupations esth√©tiques et artistiques ne sont pas tr√®s importantes pour moi.",
            "Je ne suis ni rus√©(e) ni sournois(e).",
            "Je pr√©f√®re me garder des possibilit√©s de choix, plut√¥t que tout planifier √† l'avance",
            "Il est rare que je me sente trop seul(e) et cafardeux(se).",
            "Je suis autoritaire, √©nergique, et je n'h√©site pas √† m'affirmer.",
            "Sans √©motion forte, la vie serait sans int√©r√™t pour moi.",
            "Certains trouvent que je suis √©go√Øste et que je ne pense qu'√† moi.",
            "J'essaye d'accomplir consciencieusement toutes les t√¢ches qui me sont confi√©es.",
            "Quand j'ai affaire √† d'autres personnes, je redoute toujours de faire une gaffe.",
            "Dans le travail et dans les loisirs, je prends tout mon temps.",
            "Je suis bien install√©(e) dans mes habitudes.",
            "Je pr√©f√©rerais coop√©rer avec les autres plut√¥t que me mettre en comp√©tition avec eux.",
            "Je suis nonchalant(e) et pas tr√®s ambitieux(se).",
            "Je fais rarement des exc√®s en quoi que ce soit.",
            "J'ai souvent une forte envie de quelque chose qui romprait la monotonie.",
            "Je prends souvent plaisir √† jouer avec des th√©ories ou des id√©es abstraites.",
            "Cela ne me g√™ne pas de me vanter de mes talents et de ce que j'ai r√©alis√©.",
            "J'arrive assez bien √† m'organiser pour faire les choses √† temps.",
            "Je me sens souvent d√©sesp√©r√©(e) et je voudrais que quelqu'un d'autre r√©solve mes probl√®mes.",
            "Je n'ai jamais saut√© de joie au sens litt√©ral du terme.",
            "Je crois que laisser les √©tudiants √©couter des orateurs controvers√©s ne peut que les embrouiller et les √©garer.",
            "Les dirigeants politiques doivent √™tre plus attentifs √† l'aspect humain de leur politique.",
            "Au fil des ann√©es, j'ai fait un certain nombre de choses plut√¥t stupides.",
            "Il est facile de me faire peur.",
            "Je n'ai pas beaucoup de plaisir √† bavarder avec les gens.",
            "J'essaie de maintenir toutes mes pens√©es dans une direction r√©aliste et d'√©viter les envol√©es de l'imagination.",
            "Je crois que la plupart des gens sont fondamentalement bien intentionn√©s.",
            "Je ne prends pas les devoirs civiques, comme le vote, tr√®s au s√©rieux.",
            "Je suis une personne d'humeur √©gale.",
            "J'aime avoir beaucoup de gens autour de moi.",
            "Il m'arrive quelques fois de m'absorber compl√®tement dans la musique que j'√©coute.",
            "Si c'est n√©cessaire, je suis dispos√©(e) √† manipuler les gens pour obtenir ce que je veux.",
            "Je maintiens mes affaires nettes et propres.",
            "Quelques fois, je me sens compl√®tement sans valeur.",
            "Je ne m'affirme pas toujours autant que je devrais.",
            "J'√©prouve rarement des √©motions fortes.",
            "J'essaye d'√™tre poli(e) avec chaque personne que je rencontre.",
            "Il m'arrive parfois de ne pas tenir mes engagements ou de ne pas assumer mes responsabilit√©s comme je le devrais.",
            "Je me sens rarement mal √† l'aise quand je suis avec des gens.",
            "Quand je fais quelque chose, je le fais avec √©nergie.",
            "Je pense qu'il est int√©ressant d'apprendre de nouvelles activit√©s de loisir et de s'y perfectionner.",
            "Je peux √™tre sarcastique et cassant(e) si besoin est.",
            "J'ai un ensemble bien d√©fini d'objectifs et je travaille pour les atteindre de fa√ßon ordonn√©e.",
            "J'ai du mal √† r√©sister √† mes d√©sirs.",
            "Je n'aimerais pas passer mes vacances √† Las Vegas.",
            "Je trouve les discussions philosophique ennuyeuses.",
            "Je pr√©f√®re ne pas parler de moi-m√™me ni de ce que j'ai accompli.",
            "Je perds beaucoup de temps avant de me mettre au travail.",
            "Je me sens capable de faire face √† la plupart de mes probl√®mes.",
            "J'ai quelques fois √©prouv√© une joie intense ou de l'extase.",
            "Je crois que les lois et les politiques sociales devraient changer pour refl√©ter les besoins d'un monde qui change.",
            "J'ai la t√™te dure, et je ne suis pas sentimental(e) dans mes attitudes.",
            "J'examine les choses en d√©tail avant d'arriver √† une d√©cision.",
            "Il est rare que je me sente craintif(ve) ou anxieux(se).",
            "J'ai la r√©putation d'√™tre une personne chaleureuse et amicale.",
            "J'ai une vie imaginaire active.",
            "Je crois que la plupart des gens vont profiter de vous si vous les laissez faire.",
            "Je me tiens au courant et je prends habituellement des d√©cisions intelligentes.",
            "J'ai la r√©putation d'avoir le sang chaud et de me mettre facilement en col√®re.",
            "Je pr√©f√®re habituellement faire les choses seul(e).",
            "Assister √† des spectacles de ballet ou de danse moderne m'ennuie.",
            "Je ne pourrais tromper personne, m√™me si je le voulais.",
            "Je ne suis pas quelqu'un de tr√®s m√©thodique.",
            "Je suis rarement triste ou d√©prim√©(e).",
            "J'ai souvent dirig√© les groupes auxquels j'ai appartenu.",
            "La mani√®re dont je sens les choses est importante pour moi.",
            "Certains me trouvent froid(e) et calculateur(trice).",
            "Je paie mes dettes rapidement et dans leur totalit√©.",
            "Certaines fois, j'ai eu tellement honte que j'aurais voulu me cacher.",
            "J'ai tendance √† travailler lentement mais s√ªrement.",
            "Une fois que j'ai trouv√© la bonne mani√®re de faire quelque chose, je m'y tiens.",
            "J'h√©site √† exprimer ma col√®re, m√™me quand elle est justifi√©e.",
            "Je pr√©f√®re habituellement faire les choses seul(e).",
            "J'ai peu de difficult√© √† r√©sister √† la tentation.",
            "Il m'est arriv√© de faire des choses rien que pour l'excitation ou le frisson.",
            "Je prends plaisir √† r√©soudre des probl√®mes ou des √©nigmes.",
            "Je suis meilleur(e) que la plupart des gens, et je le sais.",
            "Je suis quelqu'un d'efficace qui vient toujours √† bout du travail.",
            "Quand je suis sous la pression de situation trop difficile(s), j'ai quelques fois l'impression que je vais m'effondrer.",
            "Je ne suis pas un(e) optimiste souriant(e).",
            "Je crois que nous devrions nous tourner vers nos autorit√©s religieuses pour les d√©cisions concernant les questions morales.",
            "On n'en fait jamais trop pour les pauvres et les personnes √¢g√©es.",
            "Il m'arrive √† l'occasion d'agir d'abord et de r√©fl√©chir ensuite.",
            "Je me sens souvent tendu(e) et nerveux(se).",
            "Beaucoup de gens me trouvent assez froid(e) et distant(e).",
            "Je n'aime pas perdre mon temps √† r√™vasser.",
            "Je pense que la plupart des gens auxquels j'ai affaire sont honn√™tes et dignes de confiance.",
            "Je me mets souvent dans des situations sans y √™tre compl√®tement pr√©par√©(e).",
            "On ne me consid√®re pas comme une personne susceptible et ombrageux(euse).",
            "J'ai vraiment besoin des autres si je reste longtemps seul(e).",
            "Je suis intrigu√©(e) par les formes et les motifs que je trouve dans l'art et dans la nature.",
            "√ätre parfaitement honn√™te est une mauvaise fa√ßon de faire des affaires.",
            "J'aime bien garder chaque chose √† sa place, comme cela je sais exactement o√π elle est.",
            "J'ai quelques fois √©prouv√© un sentiment profond de culpabilit√© ou de p√©ch√©.",
            "Dans les r√©unions, je laisse d'habitude les autres parler.",
            "Il est rare que j'accorde beaucoup d'attention √† mes sentiments du moment.",
            "J'essaie en g√©n√©ral d'√™tre attentionn√©(e) et pr√©venant(e).",
            "Il m'arrive de tricher quand je joue seul(e) (par exemple : quand je joue au solitaire, quand je fais des r√©ussites...)",
            "√ßa ne me g√™ne pas trop si les gens se moquent de moi ou me taquinent.",
            "J'ai souvent le sentiment de d√©border d'√©nergie.",
            "J'essaie souvent des plats nouveaux et exotiques.",
            "Si je n'aime pas les gens, je leur fais savoir.",
            "Je travaille dur pour attendre mes objectifs.",
            "Quand je suis devant mes plats favoris, j'ai tendance √† trop manger.",
            "J'ai tendance √† √©viter les films choquants ou effrayants.",
            "Je perds quelques fois tout int√©r√™t quand les gens parlent de sujet tr√®s abstraits et th√©oriques.",
            "J'essaie d'√™tre modeste.",
            "J'ai du mal √† me forcer √† faire ce que je devrais.",
            "Je garde la t√™te froide dans les situations d'urgence.",
            "Quelques fois, je d√©borde de bonheur.",
            "Je crois que les id√©es diff√©rentes du bon (bien, beau, vrai) et du mauvais (mal, laid, faux) que les gens ont dans d'autres soci√©t√©s peuvent √™tre valables pour eux.",
            "Je n'ai aucune sympathie pour les mendiants.",
            "Avant d'agir, je r√©fl√©chis toujours aux cons√©quences de mon action.",
            "Je ressens rarement de l'appr√©hension au sujet de l'avenir.",
            "Je prends r√©ellement plaisir √† parler avec les gens.",
            "Je prends plaisir √† me concentrer sur une image int√©rieure ou une r√™verie et √† explorer toutes ses possibilit√©s en les laissant cro√Ætre et se d√©velopper.",
            "Je suis m√©fiant(e) quand quelqu'un fait quelque chose de gentil pour moi.",
            "Je suis fier(e) de la s√ªret√© de mon jugement.",
            "J'en arrive souvent √† √™tre d√©go√ªt√©(e) par les gens auxquels je dois avoir affaire.",
            "Je pr√©f√®re habituellement faire les choses seul(e).",
            "La po√©sie a peu ou pas d'effet sur moi.",
            "Je d√©testerais qu'on me prenne pour un(e) hypocrite.",
            "Il me semble que je ne serai jamais capable de m'organiser.",
            "J'ai tendance √† me faire faire des reproches quand quelque chose va de travers.",
            "Les autres se tournent souvent vers moi pour prendre des d√©cisions.",
            "J'√©prouve une grande vari√©t√© d'√©motions et de sentiments.",
            "Je n'ai pas la r√©putation d'√™tre g√©n√©reux(se).",
            "Quand je prends un engagement, on peut toujours compter sur moi pour aller jusqu'au bout.",
            "Je me sens souvent inf√©rieur(e) aux autres.",
            "Je ne suis pas aussi rapide et dynamique que les autres.",
            "Je pr√©f√®re passer mon temps dans un entourage familier.",
            "Quand on m'a insult√©(e), j'essaie simplement de pardonner et d'oublier.",
            "Je ne ressens pas un besoin intense de promotion.",
            "Je m'abandonne rarement √† mes impulsions.",
            "J'aime bien √™tre l√† o√π il y a de l'action.",
            "Je prends plaisir √† r√©soudre des probl√®mes ou des √©nigmes du genre \"casse-t√™te\" ou \"sport c√©r√©bral.\"",
            "Je suis meilleur(e) que la plupart des gens, et je le sais.",
            "Une fois que je d√©marre un projet, je le termine presque toujours.",
            "Il est souvent difficile pour moi de prendre une d√©cision.",
            "Je ne me trouve pas particuli√®rement insouciant(e) et gai(e).",
            "Je crois que la fid√©lit√© √† ses propres id√©aux et principes est plus importante que \"l'ouverture d'esprit\".",
            "Les besoins humains devraient toujours avoir la priorit√© sur les consid√©rations √©conomiques.",
            "Je fais souvent des choses sur l'impulsion du moment.",
            "Je me fais souvent du souci √† propos de choses qui pourraient mal tourner.",
            "Je trouve facile de sourire et d'√™tre agr√©able avec des inconnus.",
            "Si je sens que mon esprit commence √† d√©river vers des r√™veries, j'ai l'habitude de m'occuper et de me mettre √† me concentrer sur un travail ou une activit√©.",
            "Ma premi√®re r√©action est de faire confiance aux gens.",
            "Je n'ai pas l'impression de r√©ussir compl√®tement en quoi que ce soit.",
            "Il en faut beaucoup pour me rendre furieux(se).",
            "Je pr√©f√©rerais des vacances sur une plage √† la mode plut√¥t que dans une cabane isol√©e dans les bois.",
            "Certains genres de musique exercent sur moi une fascination sans fin.",
            "Parfois, j'utilise la ruse pour amener les gens √† faire ce que je veux.",
            "J'ai tendance √† √™tre quelque peu m√©ticuleux(se) et exigeant(e).",
            "J'ai une mauvaise opinion de moi-m√™me.",
            "Je pr√©f√®re suivre mon propre chemin plut√¥t que diriger les autres.",
            "Je remarque rarement les changements d'humeur ou les sentiments que provoquent des environnements diff√©rents.",
            "La plupart des gens que je connais m'aiment bien.",
            "J'ai des principes moraux et j'y adh√®re strictement.",
            "Je me sens √† l'aise en pr√©sence de mes patrons ou d'autres autorit√©s.",
            "J'ai habituellement l'impression d'√™tre press√©(e).",
            "Je fais parfois des changements dans la maison, juste pour essayer quelque chose de diff√©rent.",
            "Si quelqu'un provoque une bagarre, je suis pr√™t(e) √† riposter.",
            "Je m'efforce de r√©ussir tout ce que je peux.",
            "Je mange quelques fois √† me rendre malade.",
            "J'adore le frisson qu'on ressent sur les montagnes russes.",
            "J'ai peu d'int√©r√™t pour la r√©flexion sur la nature de l'univers ou sur la condition humaine.",
            "Je n'ai pas l'impression d'√™tre meilleur(e) que les autres, quelle que soit leur situation.",
            "Quand un projet devient trop difficile, j'ai tendance √† en d√©marrer un autre.",
            "Je me d√©brouille assez bien dans une situation de crise.",
            "Je suis une personne joyeuse et pleine de bonne humeur.",
            "Je me trouve large d'esprit et tol√©rant(e) pour les fa√ßons de vivre des autres.",
            "Je crois que tous les humains sont dignes de respect.",
            "Il est rare que je prenne des d√©cisions h√¢tives.",
            "J'ai moins de peur(s) que la plupart des gens.",
            "J'ai des liens affectifs forts avec mes amis.",
            "Quand j'√©tais enfant, il √©tait rare que je prenne plaisir √† \"jouer √† faire semblant\".",
            "J'ai tendance √† supposer le meilleur chez les gens.",
            "Je suis quelqu'un de tr√®s comp√©tent.",
            "Il m'est parfois arriv√© d'√™tre amer(√®re) et plein(e) de ressentiment.",
            "Habituellement, les r√©unions qui rassemblent un grand nombre de personnes m'ennuient.",
            "Quelques fois, quand je lis de la po√©sie ou quand je regarde une ≈ìuvre d'art, je ressens un frisson ou j'ai la chair de poule.",
            "Il m'arrive de faire aux autres, ce que je veux en les mena√ßant ou en les flattant.",
            "Je ne suis pas un(e) maniaque du nettoyage.",
            "Quelques fois, les choses me semblent plut√¥t morne(s) et sans espoir.",
            "Dans les conversations, j'ai tendance √† parler plus que les autres.",
            "Je trouve facile d'avoir de l'empathie, c'est-√†-dire de ressentir moi-m√™me ce que les autres ressentent.",
            "Je me consid√®re comme une personne charitable.",
            "Ce que je fais, j'essaie de le faire soigneusement, comme √ßa il n'y a pas √† le refaire.",
            "Si j'ai dit ou fait quelque chose de mal √† quelqu'un, je peux √† peine supporter de le regarder en face √† nouveau.",
            "Mon rythme de vie est rapide.",
            "En vacances, je pr√©f√®re retourner dans un endroit que je connais bien plut√¥t qu'aller dans un nouvel endroit.",
            "Je suis dur(e) et inflexible.",
            "Je m'efforce √† l'excellence dans tout ce que je fais.",
            "Quelques fois, je fais sur une impulsion des choses que je regrette par la suite.",
            "Je suis attir√©(e) par les couleurs vives et les styles voyants.",
            "J'ai beaucoup de curiosit√© intellectuelle.",
            "J'aime mieux faire l'√©loge des autres plut√¥t que recevoir moi-m√™me des √©loges.",
            "Il y a tant de petits travaux qu'il faudrait faire que parfois, tout simplement, je les ignore tous.",
            "Quand tout a l'air d'aller de travers, je reste capable de prendre les bonnes d√©cisions.",
            "J'emploie rarement des mots tels que \"fantastiques\" ou \"sensationnel\" pour d√©crire ce qui m'est arriv√©.",
            "Je pense que si les gens ne savent pas √† quoi ils croient quand ils ont vingt-cinq ans, il y a quelque chose qui ne tourne pas rond chez eux.",
            "J'ai de la compassion pour ceux qui ont moins de chance que moi.",
            "Quand je pars en voyage, je pr√©pare √† l'avance un programme minutieux.",
            "Des pens√©es effrayantes s'introduisent quelques fois dans ma t√™te.",
            "Je m'int√©resse vraiment aux gens avec lesquels je travaille.",
            "J'aurais du mal √† laisser simplement mon esprit vagabonder sans contr√¥le ni direction.",
            "J'ai une grande confiance dans la nature humaine.",
            "Je suis efficace et productif(ve) dans mon travail.",
            "Pour moi, m√™me des petites contrari√©t√©s peuvent √™tre irritantes.",
            "J'aime les \"f√™tes\" avec plein de gens.",
            "J'aime lire de la po√©sie qui met l'accent sur les sentiments et les images plut√¥t que sur le d√©roulement de l'histoire.",
            "Je suis fier(√®re) de l'habilet√© avec laquelle je manipule les gens.",
            "Je passe beaucoup de temps √† chercher des choses que j'ai mal rang√©es.",
            "Trop souvent, quand les choses vont mal, je me d√©courage et j'ai envie d'abandonner.",
            "Je ne trouve pas facile de prendre une situation en main.",
            "Des choses √©tranges -comme certains parfums ou des noms d'endroit lointains- peuvent provoquer en moi des √©motions puissantes.",
            "Si je peux, je fais un effort pour aider les autres.",
            "Il faudrait r√©ellement que je sois malade pour manquer une journ√©e de travail.",
            "Quand des gens que je connais font des choses idiotes, je suis g√™n√©(e) pour eux.",
            "Je suis une personne tr√®s active.",
            "Je prends toujours le m√™me chemin quand je vais quelque part.",
            "Je m'engage souvent dans des disputes avec ma famille ou mes coll√®gues de travail.",
            "Je consacre trop de temps au travail en n√©gligeant la famille, les amis, les loisirs.",
            "Je suis toujours capable de garder le contr√¥le de mes sentiments.",
            "J'aime bien faire partie de la foule dans les manifestations sportives.",
            "J'ai une grande vari√©t√© d'int√©r√™ts intellectuels.",
            "Je suis quelqu'un de sup√©rieur.",
            "J'ai beaucoup d'autodiscipline.",
            "Je suis assez stable √©motionnellement.",
            "Je ris facilement.",
            "Je crois que la \"nouvelle morale\" √† base de permissivit√© n'est pas du tout une morale.",
            "Je pr√©f√©rerais avoir la r√©putation de pardonner plut√¥t que celle d'√™tre juste.",
            "Avant de r√©pondre √† une question, j'y r√©fl√©chis √† deux fois "
        ];

        const facette_pattern = ['N1', 'E1', 'O1', 'A1', 'C1', 'N2', 'E2', 'O2', 'A2', 'C2', 
                                'N3', 'E3', 'O3', 'A3', 'C3', 'N4', 'E4', 'O4', 'A4', 'C4', 
                                'N5', 'E5', 'O5', 'A5', 'C5', 'N6', 'E6', 'O6', 'A6', 'C6'];

        const FACETTE_MAPPING = {};
        for (let i = 0; i < 240; i++) {
            FACETTE_MAPPING[i] = facette_pattern[i % 30];
        }

        const CLES_COTATION = {
            0: "43210", 1: "01234", 2: "01234", 3: "43210", 4: "01234",
            5: "01234", 6: "43210", 7: "43210", 8: "01234", 9: "43210",
            10: "43210", 11: "01234", 12: "01234", 13: "43210", 14: "01234",
            15: "01234", 16: "43210", 17: "43210", 18: "01234", 19: "01234",
            20: "43210", 21: "01234", 22: "01234", 23: "43210", 24: "01234",
            25: "01234", 26: "01234", 27: "43210", 28: "43210", 29: "01234",
            30: "43210", 31: "01234", 32: "43210", 33: "01234", 34: "01234",
            35: "43210", 36: "43210", 37: "01234", 38: "01234", 39: "43210",
            40: "01234", 41: "01234", 42: "43210", 43: "43210", 44: "01234",
            45: "43210", 46: "43210", 47: "01234", 48: "01234", 49: "43210",
            50: "01234", 51: "01234", 52: "43210", 53: "43210", 54: "01234",
            55: "43210", 56: "43210", 57: "01234", 58: "01234", 59: "43210",
            60: "01234", 61: "43210", 62: "01234", 63: "01234", 64: "43210",
            65: "01234", 66: "01234", 67: "43210", 68: "43210", 69: "01234",
            70: "43210", 71: "43210", 72: "01234", 73: "01234", 74: "43210",
            75: "01234", 76: "01234", 77: "43210", 78: "43210", 79: "01234",
            80: "43210", 81: "43210", 82: "01234", 83: "01234", 84: "43210",
            85: "01234", 86: "01234", 87: "43210", 88: "43210", 89: "01234",
            90: "43210", 91: "01234", 92: "43210", 93: "43210", 94: "01234",
            95: "43210", 96: "43210", 97: "01234", 98: "01234", 99: "43210",
            100: "01234", 101: "01234", 102: "43210", 103: "43210", 104: "01234",
            105: "43210", 106: "43210", 107: "01234", 108: "01234", 109: "43210",
            110: "01234", 111: "01234", 112: "43210", 113: "43210", 114: "01234",
            115: "43210", 116: "43210", 117: "01234", 118: "01234", 119: "43210",
            120: "01234", 121: "43210", 122: "01234", 123: "01234", 124: "43210",
            125: "01234", 126: "01234", 127: "43210", 128: "43210", 129: "01234",
            130: "43210", 131: "01234", 132: "01234", 133: "01234", 134: "43210",
            135: "01234", 136: "01234", 137: "43210", 138: "43210", 139: "01234",
            140: "43210", 141: "43210", 142: "01234", 143: "01234", 144: "43210",
            145: "01234", 146: "01234", 147: "43210", 148: "43210", 149: "01234",
            150: "43210", 151: "01234", 152: "01234", 153: "43210", 154: "01234",
            155: "43210", 156: "43210", 157: "01234", 158: "01234", 159: "43210",
            160: "01234", 161: "01234", 162: "43210", 163: "43210", 164: "01234",
            165: "01234", 166: "43210", 167: "01234", 168: "01234", 169: "43210",
            170: "01234", 171: "01234", 172: "01234", 173: "43210", 174: "01234",
            175: "43210", 176: "43210", 177: "01234", 178: "01234", 179: "01234",
            180: "43210", 181: "43210", 182: "01234", 183: "43210", 184: "01234",
            185: "01234", 186: "01234", 187: "43210", 188: "01234", 189: "43210",
            190: "43210", 191: "01234", 192: "01234", 193: "01234", 194: "01234",
            195: "01234", 196: "01234", 197: "01234", 198: "43210", 199: "43210",
            200: "01234", 201: "01234", 202: "01234", 203: "01234", 204: "01234",
            205: "43210", 206: "43210", 207: "43210", 208: "43210", 209: "01234",
            210: "01234", 211: "01234", 212: "01234", 213: "43210", 214: "01234",
            215: "01234", 216: "01234", 217: "01234", 218: "01234", 219: "43210",
            220: "43210", 221: "01234", 222: "43210", 223: "01234", 224: "01234",
            225: "01234", 226: "01234", 227: "01234", 228: "43210", 229: "43210",
            230: "01234", 231: "43210", 232: "01234", 233: "01234", 234: "43210",
            235: "01234", 236: "43210", 237: "01234", 238: "43210", 239: "01234"
        };

        const FACETTE_NAMES = {
            'N1': 'Anxi√©t√©', 'N2': 'Col√®re', 'N3': 'D√©pression', 'N4': 'Culpabilit√©', 'N5': 'Impulsivit√©', 'N6': 'Vuln√©rabilit√©',
            'E1': 'Chaleur', 'E2': 'Assurance', 'E3': 'Sociabilit√©', 'E4': 'Activit√©', 'E5': 'Optimisme', 'E6': 'Amour-propre',
            'O1': 'Imagination', 'O2': 'Int√©r√™t artistique', 'O3': '√âmotionnalit√©', 'O4': 'Exploration', 'O5': 'Id√©es', 'O6': 'Valeurs',
            'A1': 'Confiance', 'A2': 'Bont√©', 'A3': 'Altruisme', 'A4': 'Conformit√©', 'A5': 'Modestie', 'A6': 'Attendrissement',
            'C1': 'Comp√©tence', 'C2': 'Ordre', 'C3': 'Sens du devoir', 'C4': 'Effort', 'C5': 'Discipline', 'C6': 'D√©lib√©ration'
        };

        const DIMENSIONS = {
            'N': 'N√©vrosisme',
            'E': 'Extraversion',
            'O': 'Ouverture',
            'A': 'Amabilit√©',
            'C': 'Conscienciosit√©'
        };

        const RESPONSE_LABELS = ['FD', 'D', 'N', 'A', 'FA'];
        const RESPONSE_LONG = ['Fortement en d√©saccord', 'D√©saccord', 'Neutre', 'Accord', 'Fortement d\'accord'];

        function decodeCl√©(cl√©, r√©ponse) {
            // cl√© = "43210" ou "01234"
            // r√©ponse = 0-4 (FD, D, N, A, FA)
            const chars = cl√©.split('');
            return parseInt(chars[r√©ponse]);
        }

        function convertToPercentile(score, isFacette = true) {
            const minScore = isFacette ? 8 : 48;
            const maxScore = isFacette ? 40 : 240;
            const percentile = ((score - minScore) / (maxScore - minScore)) * 60 + 20;
            return Math.round(Math.max(20, Math.min(80, percentile)));
        }

        function getInterpretation(percentile) {
            if (percentile >= 20 && percentile <= 34) return 'Tr√®s faible';
            if (percentile >= 35 && percentile <= 44) return 'Faible';
            if (percentile >= 45 && percentile <= 55) return 'Moyen';
            if (percentile >= 56 && percentile <= 65) return '√âlev√©';
            if (percentile >= 66 && percentile <= 80) return 'Tr√®s √©lev√©';
            return 'N/A';
        }

        function getPercentileClass(percentile) {
            if (percentile >= 20 && percentile <= 34) return 'percentile-20-34';
            if (percentile >= 35 && percentile <= 44) return 'percentile-35-44';
            if (percentile >= 45 && percentile <= 55) return 'percentile-45-55';
            if (percentile >= 56 && percentile <= 65) return 'percentile-56-65';
            if (percentile >= 66 && percentile <= 80) return 'percentile-66-80';
            return '';
        }

        function App() {
            const [started, setStarted] = React.useState(false);
            const [currentQuestion, setCurrentQuestion] = React.useState(0);
            const [answers, setAnswers] = React.useState({});
            const [showResults, setShowResults] = React.useState(false);
            const [showExportModal, setShowExportModal] = React.useState(false);

            const handleAnswer = (responseIndex) => {
                const cl√© = CLES_COTATION[currentQuestion];
                const scoreCotation = decodeCl√©(cl√©, responseIndex);
                const newAnswers = { ...answers, [currentQuestion]: scoreCotation };
                setAnswers(newAnswers);
                if (currentQuestion < QUESTIONS.length - 1) {
                    setCurrentQuestion(currentQuestion + 1);
                }
            };

            const nextQuestion = () => {
                if (currentQuestion < QUESTIONS.length - 1) {
                    setCurrentQuestion(currentQuestion + 1);
                }
            };

            const prevQuestion = () => {
                if (currentQuestion > 0) {
                    setCurrentQuestion(currentQuestion - 1);
                }
            };

            const calculateScores = () => {
                const facetteScores = {};
                for (let i = 0; i < 240; i++) {
                    if (answers[i] !== undefined) {
                        const facette = FACETTE_MAPPING[i];
                        facetteScores[facette] = (facetteScores[facette] || 0) + answers[i];
                    }
                }
                return facetteScores;
            };

            const calculateDimensions = (facetteScores) => {
                const dimScores = { N: 0, E: 0, O: 0, A: 0, C: 0 };
                Object.entries(facetteScores).forEach(([facette, score]) => {
                    const dim = facette[0];
                    dimScores[dim] += score;
                });
                return dimScores;
            };

            const submitAnswers = () => {
                setShowResults(true);
            };

            const downloadJSON = () => {
                const facetteScores = calculateScores();
                const dimScores = calculateDimensions(facetteScores);

                const exportData = {
                    timestamp: new Date().toISOString(),
                    testType: 'NEO-PI-3',
                    totalQuestions: Object.keys(answers).length,
                    rawScores: answers,
                    scores: {
                        facettes: facetteScores,
                        dimensions: dimScores,
                        percentiles: {
                            facettes: Object.fromEntries(
                                Object.entries(facetteScores).map(([f, s]) => [f, convertToPercentile(s, true)])
                            ),
                            dimensions: Object.fromEntries(
                                Object.entries(dimScores).map(([d, s]) => [d, convertToPercentile(s, false)])
                            )
                        }
                    }
                };

                const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `NEO-PI-3_${Date.now()}.json`;
                a.click();
                setShowExportModal(false);
            };

            const sendToWebhook = async () => {
                const facetteScores = calculateScores();
                const dimScores = calculateDimensions(facetteScores);

                const payload = {
                    timestamp: new Date().toISOString(),
                    testType: 'NEO-PI-3',
                    totalQuestions: Object.keys(answers).length,
                    scores: {
                        facettes: facetteScores,
                        dimensions: dimScores,
                        percentiles: {
                            facettes: Object.fromEntries(
                                Object.entries(facetteScores).map(([f, s]) => [f, convertToPercentile(s, true)])
                            ),
                            dimensions: Object.fromEntries(
                                Object.entries(dimScores).map(([d, s]) => [d, convertToPercentile(s, false)])
                            )
                        }
                    }
                };

                try {
                    await fetch(WEBHOOK_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    alert('‚úÖ R√©sultats envoy√©s au serveur !');
                    setShowExportModal(false);
                } catch (err) {
                    alert('‚ö†Ô∏è Les donn√©es ont probablement √©t√© envoy√©es');
                    setShowExportModal(false);
                }
            };

            const progress = (Object.keys(answers).length / QUESTIONS.length) * 100;

            if (!started) {
                return (
                    <div className="container">
                        <div className="header">
                            <h1>NEO-PI-3</h1>
                            <p>Test Complet de Personnalit√© - 240 Questions</p>
                        </div>
                        <div className="home-screen">
                            <h2>Bienvenue au test NEO-PI-3</h2>
                            <p>R√©pondez honn√™tement √† 240 affirmations pour obtenir une √©valuation d√©taill√©e de votre personnalit√© selon le mod√®le OCEAN (Big Five).</p>
                            <div className="info-grid">
                                <div className="info-card">
                                    <div className="info-icon">üìã</div>
                                    <div className="info-title">240 Questions</div>
                                    <div className="info-text">√âvaluation compl√®te</div>
                                </div>
                                <div className="info-card">
                                    <div className="info-icon">üìä</div>
                                    <div className="info-title">5 Dimensions</div>
                                    <div className="info-text">Profil OCEAN</div>
                                </div>
                                <div className="info-card">
                                    <div className="info-icon">üî¨</div>
                                    <div className="info-title">30 Facettes</div>
                                    <div className="info-text">Analyse d√©taill√©e</div>
                                </div>
                                <div className="info-card">
                                    <div className="info-icon">‚è±Ô∏è</div>
                                    <div className="info-title">20-30 min</div>
                                    <div className="info-text">Dur√©e moyenne</div>
                                </div>
                            </div>
                            <button className="btn btn-primary btn-start" onClick={() => setStarted(true)}>
                                Commencer le Test
                            </button>
                        </div>
                    </div>
                );
            }

            if (showResults) {
                const facetteScores = calculateScores();
                const dimScores = calculateDimensions(facetteScores);

                return (
                    <div className="container">
                        <div className="header">
                            <h1>NEO-PI-3 - R√©sultats</h1>
                            <p>Feuille de Profil - Auto-√âvaluation Mixte</p>
                        </div>

                        <div className="results-container">
                            <div className="results-title">Analyse de Personnalit√©</div>

                            {['N', 'E', 'O', 'A', 'C'].map(dim => (
                                <div key={dim} className="results-section">
                                    <div className="dimension-header">{dim} - {DIMENSIONS[dim]}</div>
                                    
                                    {[1, 2, 3, 4, 5, 6].map(num => {
                                        const facette = `${dim}${num}`;
                                        const scorebrut = facetteScores[facette] || 0;
                                        const percentile = convertToPercentile(scorebrut, true);
                                        const interpretation = getInterpretation(percentile);
                                        const percentileClass = getPercentileClass(percentile);

                                        return (
                                            <div key={facette} className="facette-row">
                                                <div className="facette-name">{facette}: {FACETTE_NAMES[facette]}</div>
                                                <div className="score-brut">{scorebrut}/32</div>
                                                <div className="percentile-bar">
                                                    <div className="percentile-fill" style={{width: `${((percentile - 20) / 60) * 100}%`}}>
                                                        {percentile}
                                                    </div>
                                                </div>
                                                <div></div>
                                                <div className={`percentile-badge ${percentileClass}`}>
                                                    {interpretation}
                                                </div>
                                            </div>
                                        );
                                    })}

                                    <div className="dimension-row">
                                        <div className="dimension-name">{dim}</div>
                                        <div className="score-brut">{dimScores[dim]}/192</div>
                                        <div className="percentile-bar">
                                            <div className="percentile-fill" style={{width: `${((convertToPercentile(dimScores[dim], false) - 20) / 60) * 100}%`}}>
                                                {convertToPercentile(dimScores[dim], false)}
                                            </div>
                                        </div>
                                        <div></div>
                                        <div className={`percentile-badge ${getPercentileClass(convertToPercentile(dimScores[dim], false))}`}>
                                            {getInterpretation(convertToPercentile(dimScores[dim], false))}
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>

                        {showExportModal && (
                            <div className="export-modal">
                                <div className="export-modal-content">
                                    <div className="export-modal-title">Exporter les r√©sultats</div>
                                    <div className="export-options">
                                        <div className="export-option" onClick={downloadJSON}>
                                            üìÑ T√©l√©charger JSON
                                        </div>
                                        <div className="export-option" onClick={sendToWebhook}>
                                            üì§ Envoyer au serveur
                                        </div>
                                    </div>
                                    <button className="btn btn-secondary" onClick={() => setShowExportModal(false)}>Annuler</button>
                                </div>
                            </div>
                        )}

                        <div className="controls print-hidden">
                            <button className="btn btn-secondary" onClick={() => {
                                setStarted(false);
                                setCurrentQuestion(0);
                                setAnswers({});
                                setShowResults(false);
                            }}>Recommencer</button>
                            <button className="btn btn-success" onClick={() => setShowExportModal(true)}>üì• Exporter</button>
                            <button className="btn btn-primary" onClick={() => window.print()}>üñ®Ô∏è Imprimer</button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="container">
                    <div className="header">
                        <h1>NEO-PI-3</h1>
                        <p>Question {currentQuestion + 1} / {QUESTIONS.length}</p>
                    </div>

                    <div className="progress-section">
                        <div className="progress-bar">
                            <div className="progress-fill" style={{ width: `${progress}%` }}></div>
                        </div>
                        <div className="progress-text">{Math.round(progress)}% - {Object.keys(answers).length} / {QUESTIONS.length} questions</div>
                    </div>

                    <div className="content">
                        <div className="question-card">
                            <div className="question-number">Question {currentQuestion + 1}</div>
                            <div className="question-text">{QUESTIONS[currentQuestion]}</div>
                            <div className="response-options">
                                {[0, 1, 2, 3, 4].map(idx => {
                                    const cl√© = CLES_COTATION[currentQuestion];
                                    const score = decodeCl√©(cl√©, idx);
                                    return (
                                        <button
                                            key={idx}
                                            className={`response-btn ${idx === 0 ? 'fd' : idx === 1 ? 'd' : idx === 2 ? 'n' : idx === 3 ? 'a' : 'fa'}`}
                                            onClick={() => handleAnswer(idx)}
                                        >
                                            <div>{RESPONSE_LABELS[idx]}</div>
                                            <div style={{fontSize: '0.75em', marginTop: '4px'}}>{RESPONSE_LONG[idx]}</div>
                                        </button>
                                    );
                                })}
                            </div>
                        </div>
                    </div>

                    <div className="controls">
                        <button className="btn btn-secondary" onClick={prevQuestion} disabled={currentQuestion === 0}>
                            ‚Üê Pr√©c√©dent
                        </button>
                        {currentQuestion === QUESTIONS.length - 1 ? (
                            <button 
                                className="btn btn-primary" 
                                onClick={submitAnswers}
                                disabled={Object.keys(answers).length !== QUESTIONS.length}
                            >
                                Voir R√©sultats
                            </button>
                        ) : (
                            <button className="btn btn-primary" onClick={nextQuestion}>
                                Suivant ‚Üí
                            </button>
                        )}
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
